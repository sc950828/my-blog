### 1、数组扁平化

数组扁平化是指将一个多维数组变为一维数组

```js
// 1、使用toString()和split()方法
let arr1 = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, { name: "randy" }]
];
// 这种方法适用于数字比较好
const newArr1 = arr1.toString().split(",");
console.log(newArr1);

// 2、使用reduce
let arr2 = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, { name: "randy" }]
];
// reduce
function flatten(arr) {
  return arr.reduce((initialValue, currentValue) => {
    return initialValue.concat(
      Array.isArray(currentValue) ? flatten(currentValue) : currentValue
    );
  }, []);
}
console.log(flatten(arr2));

// 3、使用join()和split()方法
let arr3 = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, { name: "randy" }]
];
// 这种方法适用于数字比较好
const newArr3 = arr3.join(",").split(",");
console.log(newArr3);

// 4、递归
let arr4 = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, { name: "randy" }]
];
function flatten2(arr) {
  let newArr = [];
  arr.forEach(item => {
    if (Array.isArray(item)) {
      newArr = newArr.concat(flatten2(item));
    } else {
      newArr.push(item);
    }
  });
  return newArr;
}
console.log(flatten2(arr4));

// 5、扩展运算符和contact
let arr5 = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, { name: "randy" }]
];
console.log([].concat(...arr5));
```

### 2、比较两数组差异

```js
const arr1 = [1, 2, 3];
const arr2 = [3, 4, 5];
// 第一种方法
function diff1(arr1, arr2) {
  function getDiff(arr1, arr2) {
    const diff = [];
    arr1.forEach(element => {
      if (!arr2.includes(element)) {
        diff.push(element);
      }
    });
    return diff;
  }

  return getDiff(arr1, arr2).concat(getDiff(arr2, arr1));
}
console.log(diff1(arr1, arr2));

// 第二种方法
function diff2(arr1, arr2) {
  return arr1
    .filter(item => !arr2.includes(item))
    .concat(arr2.filter(item => !arr1.includes(item)));
}
console.log(diff2(arr1, arr2));

// 第三种方法
function diff3(arr1, arr2) {
  return arr1
    .concat(arr2)
    .filter(item => !arr1.includes(item) || !arr2.includes(item));
}
console.log(diff3(arr1, arr2));
```

### 3、数组随机排序

```js
// （1）使用数组 sort 方法对数组元素随机排序，让 Math.random() 出来的数与 0.5 比较，如果大于就返回 1 交换位置，如果小于就返回 -1，不交换位置。

function randomSort(a, b) {
  return Math.random() > 0.5 ? -1 : 1;
}

// 缺点：每个元素被派到新数组的位置不是随机的，原因是 sort() 方法是依次比较的。

// （2）随机从原数组抽取一个元素，加入到新数组

function randomSort(arr) {
  var result = [];

  while (arr.length > 0) {
    var randomIndex = Math.floor(Math.random() * arr.length);
    result.push(arr[randomIndex]);
    arr.splice(randomIndex, 1);
  }

  return result;
}

// （3）随机交换数组内的元素（洗牌算法类似）

function randomSort(arr) {
  var index,
    randomIndex,
    temp,
    len = arr.length;

  for (index = 0; index < len; index++) {
    randomIndex = Math.floor(Math.random() * (len - index)) + index;

    temp = arr[index];
    arr[index] = arr[randomIndex];
    arr[randomIndex] = temp;
  }

  return arr;
}

// es6
function randomSort(array) {
  let length = array.length;

  if (!Array.isArray(array) || length <= 1) return;

  for (let index = 0; index < length - 1; index++) {
    let randomIndex = Math.floor(Math.random() * (length - index)) + index;

    [array[index], array[randomIndex]] = [array[randomIndex], array[index]];
  }

  return array;
}
```

### 4、类数组变数组

```js
// 类数组没有数组的方法
// console.log(document.all.pop());

// 变数组
// slice
const arr1 = Array.prototype.slice.call(document.all);
console.log(arr1, arr1 instanceof Array);

// 深拷贝一下 因为会改变原数组
let likeArr = Array.from(document.all);
// splice
const arr2 = Array.prototype.splice.call(likeArr, 0);
console.log(arr2, arr2 instanceof Array);

// concat 使用apply调用
const arr3 = Array.prototype.concat.apply([], document.all);
console.log(arr3, arr3 instanceof Array);

// from
const arr4 = Array.from(document.all);
console.log(arr4, arr4 instanceof Array);
```
