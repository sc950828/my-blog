### 1、什么是物理像素，什么是独立像素，什么是设备像素比？

    物理像素
      物理像素也叫设备像素，是屏幕上最小的显示单元，在设备生产的时候就已经定好。(iphone5 640px)一般比独立像素大。  独立像素
      独立像素(DP或Dip)是一种虚拟像素，是逻辑上衡量像素的单位，相当于css像素。(iphone5 320px)。
    设备像素比dpr
      就是物理像素和独立像素在水平或垂直方向的比例。屏幕的缩放会改变 dpr 的值。
    ppi
      ppi指的是每英寸的物理像素的密度，ppi 越大，屏幕的分辨率越大。

### 2、谈谈对 rem 的理解？

- rem 是现在主流的移动端自适应布局方案，核心是设置 html 标签的 font-size 的大小 1rem=font-size px。
- 三种方法设置 html 元素的 font-size
  - 1. 使用@media 媒体查询给每种宽度的屏幕单独设置 font-size 大小，但是这样需要给每种机型一一设置，比较繁琐。
  - 2. 使用 js 计算 document.documentElement.style.fontSize = document.documentElement.clientWidth/10 + 'px' 这种方法最好目前主要使用这种方式。
  - 3. 使用 vw html{font-size: 10vw} 兼容性不太好。
- document.documentElement.clientWidth/10 + 'px'原理
  - 设计图都是按 750px 出图的。
  - 我们获取屏幕的宽度 / 10 给 html 设置成 font-size 的大小，所以屏幕宽度永远等于 10rem。
  - 这样我们设计图上长度/75 就是我们需要的 rem 大小。假如 75px/75 就是 1rem(1rem 在不同的手机上代表不不同的长度)。

### 3、以前的兼容移动端方法是什么？

没设置 viewport meta 标签的时候视口一般默认是 980px，所以很多的布局都是居中，然后页面宽度就是固定的 980px。margin: 0 auto;

### 4、怎么使用阿里的 flexible 适应手机端？

```css
1.lib-flexible这种方案废弃了，需要去除页面的viewport meta标签。
  npm install lib-flexible 在 main.js里面引用，或者使用下面cdn引入的方法
  <script src="http://g.tbcdn.cn/mtb/lib-flexible/0.3.2/??flexible_css.js,flexible.js"></script>
  在所有资源加载之前执行这个js。执行这个js后，会在html（也就是document.documentElement）上增加一个data-dpr属性，以及font-size样式。
  rem为设备的独立像素 * devicePixelRatio/10 iphone6是75px,然后viewport里面的initial-scale就为1/devicePixelRatio。这样就总体保证宽度为10rem。
  移动端的字体还是建议使用px。现在绝大多数的字体文件都自带一些点阵尺寸，通常是16px和24px，所以我们不希望出现13px和15px这样的奇葩尺寸。
  使用sass宏
    定义
      @mixin font-dpr($font-size){
        font-size: $font-size;

        [data-dpr="2"] & {
          font-size: $font-size * 2;
        }

        [data-dpr="3"] & {
          font-size: $font-size * 3;
        }
      }
    使用
      @include font-dpr(16px);

2.使用amfe-flexible
  npm install amfe-flexible 在 main.js里面引用，需要与viewport meta标签配合使用。
  这个库不会再加dpr 都是用rem为计量单位。rem为设备的独立像素/10 iphone6是37.5px。
```

### 5、layout viewport 、visual viewport 和 ideal viewport 的区别？

- 第一个视口是布局视口，在移动端显示网页时，由于移动端的屏幕尺寸比较小，如果网页使用移动端的屏幕尺寸进行布局的话，那么整个页面的布局都会显示错乱。所以移动端浏览器提供了一个 layout viewport 布局视口的概念，使用这个视口来对页面进行布局展示，一般 layout viewport 的大小为 980px，因此页面布局不会有太大的变化，我们可以通过拖动和缩放来查看到这个页面。

- 第二个视口指的是视觉视口，visual viewport 指的是移动设备上我们可见的区域的视口大小，一般为屏幕独立像素大小。visual viewport 和 layout viewport 的关系，就像是我们通过窗户看外面的风景，视觉视口就是窗户，而外面的风景就是布局视口中的网页内容。

- 第三个视口是理想视口，由于 layout viewport 一般比 visual viewport 要大，所以想要看到整个页面必须通过拖动和缩放才能实现。所以又提出了 ideal viewport 的概念，ideal viewport 下用户不用缩放和滚动条就能够查看到整个页面，并且页面在不同分辨率下显示的内容大小相同。ideal viewport 其实就是通过修改 layout viewport 的大小，让它等于设备的宽度，这个宽度可以理解为是设备独立像素，因此根据 ideal viewport 设计的页面，在不同分辨率的屏幕下，显示应该相同。

### 6、meta 对于移动端的一些特殊属性，可根据需要自行设置

```html
<meta name="screen-orientation" content="portrait" /> //Android 禁止屏幕旋转
<meta name="full-screen" content="yes" /> //全屏显示
<meta name="browsermode" content="application" />
//UC应用模式，使用了application这种应用模式后，页面讲默认全屏，禁止长按菜单，禁止收拾，标准排版，以及强制图片显示。
<meta name="x5-orientation" content="portrait" /> //QQ强制竖屏
<meta name="x5-fullscreen" content="true" /> //QQ强制全屏
<meta name="x5-page-mode" content="app" /> //QQ应用模式
```

### 7、电话号码识别

在 iOS Safari （其他浏览器和 Android 均不会）上会对那些看起来像是电话号码的数字处理为电话链接，比如：

- 7 位数字，形如：1234567
- 带括号及加号的数字，形如：(+86)123456789
- 双连接线的数字，形如：00-00-00111
- 11 位数字，形如：13800138000

```html
关闭识别
<meta name="format-detection" content="telephone=no" />
开启识别
<a href="tel:123456">123456</a>
```

### 8、邮箱识别（Android）

```html
安卓上会对符合邮箱格式的字符串进行识别，我们可以通过如下的 meta
来管别邮箱的自动识别：
<meta content="email=no" name="format-detection" />
同样地，我们也可以通过标签属性来开启长按邮箱地址弹出邮件发送的功能：
<a mailto:dooyoe@gmail.com>dooyoe@gmail.com</a>
```

### 9、禁止用户选择页面中的文字或者图片

```css
.div {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
```

### 10、在 iOS 上，输入框默认有内部阴影,以这样关闭：

```css
div {
  -webkit-appearance: none;
}
```

### 11、如何禁止保存或拷贝图像

```css
img {
  -webkit-touch-callout: none;
}
```

### 12、用户设置字号放大或者缩小导致页面布局错误

设置字体禁止缩放

```css
body {
  -webkit-text-size-adjust: 100% !important;
  text-size-adjust: 100% !important;
  -moz-text-size-adjust: 100% !important;
}
```

### 13、android 系统中元素被点击时产生边框

部分 android 系统点击一个链接，会出现一个边框或者半透明灰色遮罩, 不同生产商定义出来额效果不一样。

```css
a,button,input,textarea{
  -webkit-tap-highlight-color: rgba(0,0,0,0)
  -webkit-user-modify:read-write-plaintext-only;
}
```

### 14、画一条 0.5 px 的线

- 要是跟一个东西有关，DPR(devicePixelRatio) 设备像素比，它是默认缩放为 100%的情况下，设备像素和 CSS 像素的比值。目前主流的屏幕 DPR=2（iPhone 8）,或者 3（iPhone 8 Plus）。拿 2 倍屏来说，设备的物理像素要实现 1 像素，而 DPR=2，所以 css 像素只能是 0.5。
- 方法
  - 采用 transform: scaleY()或者 scaleX() 的方式。
  - 采用 meta viewport 的方式。单纯的画一条线可以使用该方法的 initial-scale 初始缩放 0.5 倍。
  - 采用 border-image 的方式。

### 15、移动端 click 屏幕产生 200-300 ms 的延迟响应

移动设备上的 web 网页是有 300ms 延迟的，往往会造成按钮点击延迟甚至是点击失效。解决方案：

- fastclick 可以解决在手机上点击事件的 300ms 延迟
- zepto 的 touch 模块，tap 事件也是为了解决在 click 的延迟问题

触摸事件的响应顺序：

- ontouchstart
- ontouchmove
- ontouchend
- onclick

### 16、audio 和 video 在 ios 和 andriod 中自动播放

这个不是 bug，由于自动播放网页中的音频或视频，会给用户带来一些困扰或者不必要的流量消耗，所以苹果系统和安卓系统通常都会禁止自动播放和使用 JS 的触发播放，必须由用户来触发才可以播放。加入自动触发播放的代码

```js
$("html").one("touchstart", function() {
  audio.play();
});
```

### 17、iOS 上拉边界下拉出现空白

手指按住屏幕下拉，屏幕顶部会多出一块白色区域。手指按住屏幕上拉，底部多出一块白色区域。
在 iOS 中，手指按住屏幕上下拖动，会触发 touchmove 事件。这个事件触发的对象是整个 webview 容器，容器自然会被拖动，剩下的部分会成空白。
解决方案

```js
document.body.addEventListener(
  "touchmove",
  function(e) {
    if (e._isScroller) return;
    // 阻止默认事件
    e.preventDefault();
  },
  {
    passive: false
  }
);
```

### 18、ios 日期转换 NAN 的问题

将日期字符串的格式符号替换成'/'

time.replace(/-/g, '/')

### 19、IOS 键盘弹起挡住原来的视图

可以通过监听移动端软键盘弹起。Element.scrollIntoViewIfNeeded（Boolean）方法用来将不在浏览器窗口的可见区域内的元素滚动到浏览器窗口的可见区域。 如果该元素已经在浏览器窗口的可见区域内，则不会发生滚动。
true，则元素将在其所在滚动区的可视区域中居中对齐。
false，则元素将与其所在滚动区的可视区域最近的边缘对齐。 根据可见区域最靠近元素的哪个边缘，元素的顶部将与可见区域的顶部边缘对准，或者元素的底部边缘将与可见区域的底部边缘对准。

```js
window.addEventListener("resize", function() {
  if (
    document.activeElement.tagName === "INPUT" ||
    document.activeElement.tagName === "TEXTAREA"
  ) {
    window.setTimeout(function() {
      if ("scrollIntoView" in document.activeElement) {
        document.activeElement.scrollIntoView(false);
      } else {
        document.activeElement.scrollIntoViewIfNeeded(false);
      }
    }, 0);
  }
});
```

### 20、onkeyUp 和 onKeydown 兼容性问题

IOS 中 input 键盘事件 keyup、keydown、等支持不是很好, 用 input 监听键盘 keyup 事件，在安卓手机浏览器中没有问题，但是在 ios 手机浏览器中用输入法输入之后，并未立刻相应 keyup 事件

### 21、IOS 键盘收起时页面没用回落，底部会留白

通过监听键盘回落时间滚动到原来的位置

```js
window.addEventListener("focusout", function() {
  window.scrollTo(0, 0);
});

//input输入框弹起软键盘的解决方案。
var bfscrolltop = document.body.scrollTop;
$("input")
  .focus(function() {
    document.body.scrollTop = document.body.scrollHeight;
    //console.log(document.body.scrollTop);
  })
  .blur(function() {
    document.body.scrollTop = bfscrolltop;
    //console.log(document.body.scrollTop);
  });
```

### 22、IOS 下 fixed 失效的原因

软键盘唤起后，页面的 fixed 元素将失效，变成了 absolute，所以当页面超过一屏且滚动时，失效的 fixed 元素就会跟随滚动了。不仅限于 type=text 的输入框，凡是软键盘（比如时间日期选择、select 选择等等）被唤起，都会遇到同样地问题。
解决方法: 不让页面滚动，而是让主体部分自己滚动,主体部分高度设为 100%，overflow:scroll

```html
<body>
  <div class='warper'>
    <div class='main'></div>
  <div>
  <div class="fix-bottom"></div>
</body>
```

```css
.warper {
  position: absolute;
  width: 100%;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  overflow-y: scroll;
  -webkit-overflow-scrolling: touch; /* 解决ios滑动不流畅问题 */
}
.fix-bottom {
  position: fixed;
  bottom: 0;
  width: 100%;
}
```

### 23、iOS 滑动不流畅

在滚动容器上增加滚动 touch 方法

```css
.wrapper {
  -webkit-overflow-scrolling: touch;
}
```
