### UDP 协议

UDP 协议 全称是用户数据报协议，是一种无连接的协议

### UDP 特点

面向无连接 没有握手操作

- UDP 想发数据就可以开始发送了，不需要连接，它只是数据报文的搬运工，不会对数据报文进行任何拆分和拼接操作
- 在发送端，应用层将数据传递给传输层的 UDP 协议，UDP 只会给数据增加一个 UDP 头标识下是 UDP 协议，然后就传递给网络层了
- 在接收端，网络层将数据传递给传输层，UDP 只去除 IP 报文头就传递给应用层，不会任何拼接操作

有单播、多播、广播

UDP 不止支持一对一的传输方式，同样支持一对多，多对多，多对一的方式，也就是说 UDP 提供了单播，多播，广播的功能

面向报文

- 发送方的 UDP 对应用程序交下来的报文，在添加首部后就向下交付 IP 层
- UDP 对应用层交下来的报文，既不合并，也不拆分，而是保留这些报文的边界
- 因此，应用程序必须选择合适大小的报文

不可靠性 没有连接 没有流量控制 没有拥塞控制

- 不可靠性首先体现在无连接上，通信都不需要建立连接，想发就发，这样的情况肯定不可靠
- 收到什么数据就传什么数据，并且也不会备份数据，发送数据也不会关心对方是否已经正确接收到数据了
- 网络环境时好时坏，但 UDP 没有拥塞控制，一直会以恒定的速度发送数据，即使网络条件不好，也不会对发送速率进行调整，这样实现的弊端就是在网络条件不好的情况下可能会导致丢包，但是优点也很明显，在某些实时性要求高的场景 ( 比如电话会议 ) 就需要使用 UDP 而不是 TCP

头部开销小，传输数据报文高效

- 两个十六位的端口号，分别为发出端口和接收端口
- 整个数据报文的长度
- 整个数据报文的检验和（IPv4 可选字段），该字段用于发现头部信息和数据中的错误
- 所以 UDP 的头部开销小，只有 8 字节，相比 TCP 的至少 20 字节要少得多，在传输数据报文时是很高效的

### UDP 报文段结构

- UDP 报文段由首部和应用数据组成。报文段首部包含四个字段，分别是源端口号、目的端口号、长度和检验和，每个字段的长度为两个字节，总共八个字节。长度字段指的是整个报文段的长度，包含了首部和应用数据的大小。校验和是 UDP 提供的一种差错校验机制。 虽然提供了差错校验的机制，但是 UDP 对于差错的恢复无能为力。
